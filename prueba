#include <stdio.h> 
#include <string.h> 
#include <fstream> 
#include <iostream>
#include <algorithm>
#include <sstream>
#include <string>
#pragma warning(disable : 4996)

using namespace std;


/*
void add(char* data, FILE* filePointer)
{
    filePointer = fopen("index.txt", "a+");
    if (filePointer == NULL)
        printf("GfgTest.txt file failed to open.");

    else
    {
        printf("The file is now opened.\n");
        if (strlen(data) > 0)
        {
            fputs(data, filePointer);
            fputs("\n", filePointer);
        }

        fclose(filePointer);
        printf("Data successfully written in file GfgTest.c\n");
        printf("The file is now closed.");
    }
}

void write(char *data, FILE* filePointer, string name, int valid)
{
    filePointer = fopen(name.data(), "w");
    cout <<name << "\n\n\n";
    if (filePointer == NULL)
        printf("GfgTest.txt file failed to open.");
 
    else
    {
        printf("The file is now opened.\n");
        if (strlen(data) > 0)
        {
            fputs(data, filePointer);
            fputs("\n", filePointer);
        }

        fclose(filePointer);
        printf("Data successfully written in file GfgTest.c\n");
        printf("The file is now closed.");
    }
    if (valid == 1)
    {
        char dataW[50] ;
        add(dataW, filePointer);
    }
}




void read(char *dataR, FILE* filePointer )
{
    filePointer = fopen("GfgTest.txt", "r");
   
    if (filePointer == NULL)
        printf("GfgTest.txt file failed to open.");
    
    else
    {

        printf("The file is now opened.\n");

        while (fgets(dataR, 50, filePointer) != NULL)
              printf("%s", dataR);
        

        fclose(filePointer);

        printf("Data successfully read from file GfgTest.c\n");
        printf("The file is now closed.");
    }
}

bool fileExists()
{
    string temp;
    temp = "index.txt";

    ifstream file(temp.c_str(), ios_base::out | ios_base::in);
    if (!file)
        return 0;
    return 1;

}



int main()
{
    FILE* filePointer = NULL;
    string indice="index.txt";
    

    char data[50]="";
    char dataR[50];

    bool index = fileExists();
    if (index == 0)
    {
        write(data, filePointer, indice,0);
    }

    string name;
    cout << "ingresa el numbre de la tabla:";
    cin >> name;
    name= name + ".txt";


    
    char dataW[50]= "111111111";
    write(dataW, filePointer, name,1);
    //add(dataW, filePointer);
    //read(dataR, filePointer);
        
}
*/

bool verify(string index)
{
    ifstream file(index.data(), ios_base::in );
    if (!file)
        return 1; //no existe
    return 0;//si existe
}

void append(string name,string data)
{
   
    std::fstream fs;

        fs.open(name.data(), std::ios_base::app);
        fs <<data.data()<<"\n";
        fs.close();
    


}

void write(string name,string data,int ver)
{
    name = name + ".txt";
    ofstream ofs(name.data());

    

    if (ver == 1)
    {
        string name2 = name.data();
        append(name, data);
        string index = "index.txt";
        append(index, name);
    }
    
}

void valid()
{

}

void identifier()
{
    string name,data;
    cout << "ingresa nombre de tabla: ";
    cin >> name;
    cout << "ingresa data: ";
    cin >> data;
    bool pre = 0;
    pre = verify(name);

    ///////////////////////replace
    if (pre == 1)
    {
        write(name, data, 1);
        cout << "writing \n\n";
    } 
    
    else
        append(name,data);
    //////////////////////////////////
}

int main()
{
    string index = "index";
    bool pre = 0;

    pre= verify(index);

    if (pre == 1)
        write(index," ",0);
 
    while (true)
    {
        identifier();
    }
    
    

}
